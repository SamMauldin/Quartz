-- Setup environment
A.draw = {}

A.draw.setColors = function(fg, bg)
	term.setTextColor(fg or colors.white)
	term.setBackgroundColor(bg or colors.black)
end

A.draw.clear = function(colors)
	term.setCursorPos(1, 1)
	if colors then
		A.draw.setColors()
	end
	term.clear()
end

A.draw.drawPixel = function(x, y)
	term.setCursorPos(x, y)
	term.write(" ")
end

A.draw.line = function(startX, startY, endX, endY)
	startX = math.floor(startX)
	startY = math.floor(startY)
	endX = math.floor(endX)
	endY = math.floor(endY)

	if startX == endX and startY == endY then
		A.draw.drawPixel(startX, startY)
		return
	end

	local minX = math.min(startX, endX)
	if minX == startX then
		minY = startY
		maxX = endX
		maxY = endY
	else
		minY = endY
		maxX = startX
		maxY = startY
	end

	local xDiff = maxX - minX
	local yDiff = maxY - minY

	if xDiff > math.abs(yDiff) then
		local y = minY
		local dy = yDiff / xDiff
		for x=minX,maxX do
			A.draw.drawPixel(x, math.floor(y + 0.5))
			y = y + dy
		end
	else
		local x = minX
		local dx = xDiff / yDiff
		if maxY >= minY then
			for y=minY,maxY do
				A.draw.drawPixel(math.floor(x+0.5), y)
				x = x + dx
			end
		else
			for y=minY,maxY,-1 do
				A.draw.drawPixel(math.floor(x+0.5), y)
				x = x - dx
			end
		end
	end
end

A.draw.box = function(x1, y1, x2, y2)
	for i=x1, x2 do
		A.draw.line(i, y1, i, y2)
	end
end